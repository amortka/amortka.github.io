(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports={wrapper:"Webcapture_wrapper__1EE0l"}},34:function(e,t,a){e.exports={editor:"Editor_editor__1m6RV",photo:"Editor_photo__y629u"}},35:function(e,t,a){e.exports=a(48)},41:function(e,t,a){},42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},43:function(e,t,a){},47:function(e,t,a){e.exports={overlay:"Overlay_overlay__2nZZl"}},48:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(31),c=a.n(r),o=(a(41),a(8)),s=a(9),h=a(12),l=a(10),u=a(13),d=(a(42),a(43),function(){return i.a.createElement("div",{style:{height:"40px"}},"header")}),f=a(32),v=a.n(f),w=(a(47),n.Component,a(33)),g=a.n(w),m=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={width:0,height:0,overlay:{x:0,y:0,scale:1,width:null,height:null},wheels:[{x:416,y:440,r:195},{x:1502,y:440,r:195}]},a.containerRef=i.a.createRef(),a.canvasRef=i.a.createRef(),a.setRef=function(e){a.webcam=e},a.capture=function(){var e=a.state,t=(e.overlay,e.width),n=e.height,i=document.createElement("canvas");i.width=t,i.height=n,i.getContext("2d").drawImage(a.videoRef,0,0);var r=i.toDataURL("image/png",1);a.props.onPhoto({image:r,overlay:a.state.overlay,wheels:a.state.wheels})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.containerRef.current.getBoundingClientRect(),a=t.width,n=t.height;this.canvas=this.canvasRef.current,this.ctx=this.canvas.getContext("2d");var i=new Image;i.addEventListener("load",function(){var t=.75*a/i.width,r=a/2-i.width*t/2,c=n/2-i.height*t/2,o={width:i.width,height:i.height,x:r,y:c,scale:t};e.setState({width:a,height:n,img:i,overlay:o})},!1),i.src="".concat("/wheels","/assets/images/").concat(this.props.overlay)}},{key:"init",value:function(){this.videoRef=this.containerRef.current.querySelector("video"),console.log(this.videoRef),this.drawCanvas()}},{key:"handleStream",value:function(e){console.log(e)}},{key:"drawCanvas",value:function(){var e=this,t=this.state.overlay;this.ctx.drawImage(this.videoRef,0,0),this.ctx.globalCompositeOperation="screen",this.ctx.drawImage(this.state.img,t.x,t.y,t.width*t.scale,t.height*t.scale),this.ctx.globalCompositeOperation="source-over",requestAnimationFrame(function(){return e.drawCanvas()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.width,n=t.height;return i.a.createElement("div",{className:g.a.wrapper,ref:this.containerRef},i.a.createElement("canvas",{width:a,height:n,ref:this.canvasRef}),a&&n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{audio:!1,height:n,width:a,ref:this.setRef,onUserMedia:function(){return e.init()},screenshotFormat:"image/png",videoConstraints:{width:1280,height:720,facingMode:"environment"},style:{height:"100%",width:"100%"}})),i.a.createElement("button",{onClick:this.capture},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"50",height:"50"},i.a.createElement("g",{fill:"#fff"},i.a.createElement("path",{d:"M452.7,133h-66.4l-28.8-53.9C350.2,65.4,336,57,320.5,57H191.5c-15.6,0-29.8,8.4-37.1,22.1L125.7,133 H59.3C36.1,133,17,152.1,17,175.3v237.8c0,23.2,19.1,41.9,42.3,41.9h393.5c23.2,0,42.3-18.8,42.3-41.9V175.3 C495,152.1,475.9,133,452.7,133z M471,413.1c0,9.9-8.3,17.9-18.3,17.9H59.3c-9.9,0-18.3-8-18.3-17.9V175.3 c0-9.9,8.3-18.3,18.3-18.3h73.6c4.4,0,8.5-2.3,10.6-6.2l32.2-60.4c3.1-5.9,9.2-9.4,15.9-9.4h128.9c6.7,0,12.8,3.6,15.9,9.5 l32.2,60.3c2.1,3.9,6.2,6.2,10.6,6.2h73.6c9.9,0,18.3,8.4,18.3,18.3V413.1z"}),i.a.createElement("path",{d:"M256,174.3c-61.4,0-111.3,49.9-111.3,111.3S194.6,396.9,256,396.9s111.3-49.9,111.3-111.3 S317.4,174.3,256,174.3z M256,372.9c-48.1,0-87.3-39.2-87.3-87.3s39.2-87.3,87.3-87.3s87.3,39.2,87.3,87.3S304.1,372.9,256,372.9z"}),i.a.createElement("path",{d:"M216,142h79c6.6,0,12-5.4,12-12s-5.4-12-12-12h-79c-6.6,0-12,5.4-12,12S209.4,142,216,142z"})))))}}]),t}(n.Component),p=a(51),y=a(55),b=a(20),x=a(52),O=a(53),j=a(54),E=a(56),R=a(34),C=a.n(R),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).canvasRef=i.a.createRef(),a.containerRef=i.a.createRef(),a.state={top:null,left:null,width:null,height:null,wheel:{img:"wheel-1.png",size:331},offset:[{x:0,y:0},{x:0,y:0}]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.containerRef.current.getBoundingClientRect(),a=t.width,n=t.height,i=t.top,r=t.left;this.ctx=this.canvasRef.current.getContext("2d");var c=this.canvasRef.current,o=Object(p.a)(c,"mousedown").pipe(Object(b.a)(I)),s=Object(p.a)(c,"mousemove").pipe(Object(b.a)(I)),h=Object(p.a)(c,"mouseup").pipe(Object(b.a)(I)),l=Object(p.a)(c,"touchstart").pipe(Object(b.a)(_)),u=Object(p.a)(c,"touchmove").pipe(Object(b.a)(_)),d=Object(p.a)(c,"touchend").pipe(Object(b.a)(_)),f=Object(y.a)(o,l),v=Object(y.a)(s,u),w=Object(y.a)(h,d);v.pipe(Object(x.a)(),Object(O.a)(f),Object(j.a)(w),Object(E.a)(),Object(b.a)(function(e){return{x:e[1].x-e[0].x,y:e[1].y-e[0].y,clientX:e[1].x,clientY:e[1].y}})).subscribe(function(t){var a=t.x,n=t.y;e.setState(function(e){return{offset:[{x:e.offset[0].x+a,y:e.offset[0].y+n},{x:e.offset[1].x+a,y:e.offset[1].y+n}]}},function(){return e.draw()})}),this.setState({width:a,height:n,top:i,left:r},function(){e.draw()})}},{key:"draw",value:function(){this.drawPhoto()}},{key:"drawPhoto",value:function(){var e=this,t=this.state,a=t.width,n=t.height,i=this.props.data;if(this.baseImg){var r=this.baseImg,c=r.width,o=r.height,s=n,h=n/o*c,l=(a-h)/2;this.ctx.drawImage(this.baseImg,l,0,h,s),this.drawWheels()}else{var u=new Image;u.addEventListener("load",function(){e.baseImg=u;var t=u.width,i=u.height,r=n,c=n/i*t,o=(a-c)/2;e.ctx.drawImage(u,o,0,c,r),e.drawWheels()},!1),u.src=i.image}}},{key:"drawWheels",value:function(){var e=this,t=this.state,a=(t.width,t.height,this.props.data);if(this.wheelImg)a.wheels.forEach(function(t,n){var i=a.overlay.x+t.x*a.overlay.scale+e.state.offset[n].x,r=a.overlay.y+t.y*a.overlay.scale+e.state.offset[n].y,c=t.r*a.overlay.scale;e.ctx.drawImage(e.wheelImg,i-c/2,r-c/2,c,c)});else{var n=new Image;n.addEventListener("load",function(){console.log("heres"),e.wheelImg=n,a.wheels.forEach(function(t,i){var r=a.overlay.x+t.x*a.overlay.scale,c=a.overlay.y+t.y*a.overlay.scale,o=t.r*a.overlay.scale;e.ctx.drawImage(n,r-o/2,c-o/2,o,o)})},!1),n.src="".concat("/wheels","/assets/wheels/").concat(this.state.wheel.img)}}},{key:"render",value:function(){return i.a.createElement("div",{className:C.a.editor,ref:this.containerRef},i.a.createElement("canvas",{ref:this.canvasRef,width:this.state.width,height:this.state.height}))}}]),t}(n.Component);function I(e){return e.preventDefault(),{x:e.clientX,y:e.clientY}}function _(e){return e.preventDefault(),{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}var S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={data:null,overlay:"bmw-320d-2014.png"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onPhoto",value:function(e){this.setState({data:e})}},{key:"reset",value:function(){this.setState({data:null})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement(d,null),this.state.data?i.a.createElement(k,{data:this.state.data}):i.a.createElement(i.a.Fragment,null,i.a.createElement(m,{overlay:this.state.overlay,onPhoto:function(t){return e.onPhoto(t)}})),i.a.createElement("button",{className:"reset",onClick:function(){return e.reset()}},"reset"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.69501d66.chunk.js.map